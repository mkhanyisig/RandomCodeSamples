<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src='https://kit.fontawesome.com/a076d05399.js'></script>
<title>Author Profiles Template</title>
<style>
p {
  word-spacing: normal;
}
div {
  word-spacing: normal;
}
.card {
  box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.2);
  max-width: 300px;
  margin: auto;
  text-align: center;
  font-family: arial;
}
.title {
  color: grey;
  font-size: 18px;
}
button {
  border: none;
  outline: 0;
  display: inline-block;
  padding: 8px;
  color: white;
  background-color: #000;
  text-align: center;
  cursor: pointer;
  width: 100%;
  font-size: 18px;
}
a {
  text-decoration: none;
  font-size: 22px;
  color: black;
}
button:hover, a:hover {
  opacity: 0.7;
}
#slide {
    border: 1px solid black;
    background-color: green;
}
#slide-body{
    height: 70px;

    overflow: auto;
    transition:             height 500ms ease;
        -moz-transition:    height 500ms ease;
        -ms-transition:     height 500ms ease;
        -o-transition:      height 500ms ease;
        -webkit-transition: height 500ms ease;
    word-spacing: normal;
}
.expanded {
    height: 300px !important;
    margin:4px, 4px;
    padding:4px;
    background-color: green;
    overflow-x: hidden;
    overflow-y: auto;
    text-align:justify;
}
#more {
    cursor: pointer;
    text-align: right;
}

</style>
</head>
<body>
<h2 style="text-align:center">Prospector Profile Template</h2>
<div class="card">
  <img id='ppic' src="https://raw.githubusercontent.com/mkhanyisig/RandomCodeSamples/master/43-101_authors.png" alt="John" style="width:100%" onerror=myfunction()>
  <h1 id="name">Firstname Lastname</h1>
  <p id="title">Job Title at Company Name</p>
  <p id="job_hist" style="text-align:left;color:blue;" > <b>Past Companies</b> </p>
  <p id="previous_companies" style="color:green;" > Companies </p>
  <p id="ed_back" style="text-align:left;"> <b>Education Background</b> </p>
  <!--
    <p id="university"> Attended University</p><p id="degree"><p> <p id='major'>Degree Obtained </p>
  -->
  <p id="education_history"> Education History </p>
  <p id="location" style="text-align:left;text-indent: 10px;"> <i class='fas fa-map-pin' style='font-size:26px;color:red'> </i> Location<p>
  <br>
  <div id="about">About<div>
  <div id="slide">
    <div id="slide-body">
      Professional History
    </div>
  <div id="more">more...</div>
</div>

  <div style="margin: 15px 0;">
    Social Media Links <br>
    <a href="#"><i class="fa fa-twitter"></i></a>
    <a class="linkedin_link" id="lnkdn" href="https://www.linkedin.com/in/michael-dufresne-a46b3824/"><i class="fa fa-linkedin"></i></a>
    <a href="#"><i class="fa fa-facebook"></i></a>
  </div>
  <p><button>Contact</button></p>
</div>
<script src='https://kit.fontawesome.com/a076d05399.js'></script>
<script>
let dt=[
  {
    "link": "https://www.linkedin.com/in/neil-winkelmann-4130491/?originalSubdomain=ca",
    "Name": "Neil Winkelmann",
    "Title": "Principal Consultant - Mining at SRK Consulting",
    "About / Summary": "Production and Operational Management <br> Underground Coal Mining Technical Services <br> Business Analysis for Rio Tinto - Major Copper Projects <br> Advanced Valuation Techniques <br> Specialties: Production and Operational Management <br> Underground Coal Mining Technical Services <br> Business Analysis for Rio Tinto - Major Copper Projects <br> Advanced Valuation Techniques",
    "Profile Photo": "https://media-exp1.licdn.com/dms/image/C5603AQEWqrfmpItkhA/profile-displayphoto-shrink_200_200/0?e=1603324800&v=beta&t=2r2yMdhkDW9I22r30DOSwJ9B57HwZboqNRg4vzp__e0",
    "location": "Vancouver, British Columbia, Canada",
    "Connections": "500+ connections",
    "Company Name/ Current Position": "SRK Consulting",
    "Job Title": "Principal Consultant - Mining",
    "Joining Date": "Apr 2012 \u2013 Present",
    "Experince / Tenure": "8 yrs 5 mos",
    "Past job titles": [
      "Principal Consultant - Mining",
      "President - Canadian and UK Operations",
      "Chief Operating Officer",
      "\nCompany Name\nRio Tinto Copper Group\n",
      "Mining Engineer",
      "Joseph Mik",
      "Mark Adley",
      "Melodie Chant"
    ],
    "Past companies": [
      "SRK Consulting",
      "Rio Tinto Copper Group",
      "Walter Energy",
      "Western Coal Corporation",
      "Anglo American",
      "PowerCoal",
      "Elcom Collieries"
    ],
    "Past job details": [],
    "Education History": [
      [
        "University of Oxford",
        "MBA, ",
        "2004 - 2005"
      ],
      [
        "Said Business School",
        "MBA, ",
        ""
      ],
      [
        "University of New South Wales",
        "Bachelor of Engineering, ",
        "1980 - 1984"
      ]
    ],
    "College Name": "University of Oxford",
    "Degree": "MBA",
    "Major": "Business Administration",
    "Grad Year": "2004 - 2005"
  }
];

</script>
<script>

// get JSON
try {
  fetch('https://raw.githubusercontent.com/mkhanyisig/RandomCodeSamples/master/profiles.js').then(data => {
  console.log(data) // Prints result from `response.json()` in getRequest
});
  //console.log()
} catch(err) {
  alert(err); // Failed to fetch
}
//console.log(document.cookie);
document.getElementById( 'slide' ).addEventListener( 'click', function() {
    var body = document.getElementById( 'slide-body' );
    if( body.className == 'expanded' ) {
        body.className = '';
        document.getElementById( 'more' ).textContent = 'more...';
    } else {
        body.className = 'expanded';
        document.getElementById( 'more' ).textContent = 'less...';
    };
} );
//console.log(dt);
function profileObject(d, name) {
    var i;
    for(i=0;i<d.length;i++){
        //console.log(d[i].Name);
        if(d[i].Name==name){
            return d[i];
        }
    }
    // default
    return null;
}

function myfunction(){
    return "https://raw.githubusercontent.com/mkhanyisig/RandomCodeSamples/master/43-101_authors.png";
}

var obj=null;
function search(nm){
  console.log(profileObject(dt,nm));

  obj=profileObject(dt,nm);
}

search("Neil Winkelmann");

// update fields
// location
if(obj.hasOwnProperty('location')){
    document.getElementById( 'location' ).innerHTML = "<i class='fas fa-map-pin' style='font-size:15px;color:red'>   </i>"+"."+obj.location;
}

if(obj.hasOwnProperty('Title')){
    if(obj.hasOwnProperty("Joining Date")){
        if(obj["Joining Date"]!=" N/A"){
          document.getElementById( 'title' ).innerHTML = obj.Title+"<br> <p style='font-size:11px;'> ( "+obj["Joining Date"]+" ) </p>";
        }else{
          document.getElementById( 'title' ).innerHTML = obj.Title;
        }
          }
    else{
        document.getElementById( 'title' ).innerHTML = obj.Title;
    }
}

if(obj.hasOwnProperty('Name')){
    document.getElementById( 'name' ).innerHTML = obj.Name;
}
if(obj.hasOwnProperty('Education History')){
    console.log(obj['Education History']);
    let ed=obj['Education History'];
    var i=0;
    var s="";

    for(i=0;i<ed.length;i++){
          s+="<br><b> "+ed[i][0] +"</b><br>";
          s+="<b><i> "+ed[i][1]+"</i></b><br>";
          s+=ed[i][2]+"<br>";
          console.log(s);
    }
    console.log(s);

    document.getElementById( 'education_history' ).innerHTML = s;
}

if(obj.hasOwnProperty('Past companies')){
    console.log(obj['Past companies']);
    let comps=obj['Past companies'];
    var i=0;
    var s="";

    for(i=0;i<comps.length;i++){
          s+="<b> "+comps[i] +"</b><br>";
          console.log(s);
    }
    //console.log(s);

    document.getElementById( 'previous_companies' ).innerHTML = s;
}
if(obj.hasOwnProperty('Profile Photo')){ // server error restriction from Linkedin
    if(obj['Profile Photo']!="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"){
        console.log(obj['Profile Photo']);
        //document.getElementById("ppic").src= obj['Profile Photo'];

        var myRequest = new Request(obj['Profile Photo']);

        fetch(myRequest).then(function(response) {
          console.log(response.status); // returns 200
          if(response.status<400){
              console.log("image link loads");
              document.getElementById("ppic").src= obj['Profile Photo'];
          }
        });

    }else{
        //document.getElementById("ppic").src= "https://www.ibts.org/wp-content/uploads/2017/08/iStock-476085198.jpg";
        document.getElementById("ppic").src= "https://raw.githubusercontent.com/mkhanyisig/RandomCodeSamples/master/43-101_authors.png";
    }
}
// About Section
let prof_his='';

if(obj.hasOwnProperty("About / Summary")){
    var str='<br> ';

    if(obj["About / Summary"]!=null){
        str+="Professional Linkedin Summary  <br><br> \r\n ";
        str+=obj["About / Summary"];
    }else{
        str+="Professional Linkedin Summary  - None <br><br> \r\n ";
    }
    prof_his+=str;
}
document.getElementById( 'slide-body' ).innerHTML = prof_his;
console.log(obj["link"]);
console.log(document.getElementById('lnkdn'));
document.getElementById('lnkdn').href= obj["link"];
</script>

</body>
</html>
